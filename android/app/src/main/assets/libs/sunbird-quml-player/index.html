<!DOCTYPE html>
<html lang="en">

  <head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>QUML Player web component demo</title>

    <link rel="stylesheet" href="./styles.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js"
      integrity="sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg=="
      crossorigin="anonymous"></script>

    <style>
      .player-grid {
        width: 100%;
        height: 100vh;
        margin: 0 auto;
        display: grid;
        padding-top: 0rem;

        @media screen and (max-width:768px) {
          grid-template-columns: 100%;
          gap: 0px;
        }
      }
    </style>
  </head>

  <body>
    <div class="player-grid" id="my-player">
    </div>
    <script type="text/javascript" src="sunbird-quml-player.js"></script>
    <script type="text/javascript">
      function setData() 
      {
        let qumlPlayerConfig=null;
        let questionListUrl=null;
        if(localStorage.getItem("qumlPlayerObject")){
          let jsonObj=JSON.parse(localStorage.getItem("qumlPlayerObject"));
          qumlPlayerConfig=jsonObj?.qumlPlayerConfig;
          questionListUrl=jsonObj?.questionListUrl;
          //alert("in json object "+qumlPlayerConfig);
          //alert("in json object "+questionListUrl);
          //alert(JSON.parse(localStorage.getItem("qumlPlayerObject")))
        }
        if(qumlPlayerConfig!=null && questionListUrl!=null)
        {
          const playerConfig = qumlPlayerConfig;
          // Need to pass the API URL to fetch the question set
          //window.questionListUrl = 'https://egapi-uat.tekdinext.com/mw/events/camp-question-list';
          window.questionListUrl = questionListUrl;
          const qumlPlayerElement = document.createElement('sunbird-quml-player');
          qumlPlayerElement.setAttribute('player-config', JSON.stringify(playerConfig));
          qumlPlayerElement.addEventListener('playerEvent', (event) => {
            console.log("On playerEvent", event);
          });

          qumlPlayerElement.addEventListener('telemetryEvent', (event) => {
            console.log("On telemetryEvent", event);
          });

          const myPlayer = document.getElementById("my-player");
          myPlayer.appendChild(qumlPlayerElement);
        }
        else
        {
          alert("Invalid playerConfig");
        }
      }
    </script>
  </body>

</html>


<!--
  Steps to run locally:
  1. Install http-server npm package locally `npm i http-server -g`
  2. Build the web component using `npm run build-web-component`
  3. Run the server using `http-server --cors web-component .`
-->